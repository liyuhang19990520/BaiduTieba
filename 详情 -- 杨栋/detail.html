<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/detail.css">
</head>
<body>
    <div class="detailContent">
        <div class="topBox">
            <img src="./img/返回.png" alt="">
            <img id="main" src="./img/主页.png" alt="">
            <div class="barName">两头猪：家猪和野猪</div>
            <img src="./img/搜索.png" alt="">
        </div>
        <div class="headBox">
            <div class="headImgBox">
                <img class="headImg" src="./img/default.jpg" alt="">
            </div>
            <div class="userBox">
                <div class="userName">艾滋病死亡</div>
                <div class="time">2020-10-17 20:50:17</div>
            </div>
        </div>
        <div class="box">
           
        </div>
        <div class="interactionBox">
            <div class="collection">
                <img src="./img/shoucang.png" alt="">
                <span>收藏</span>
            </div>
            <div class="comment">
                <img src="./img/pinglun.png" alt="">
                <span class="commentNum">122</span>
            </div>
            <div class="thumbsUp">
                <img src="./img/dianzan.png" alt="">
                <span class="thumbsUpNum">122</span>
            </div>
        </div>

        <div class="commentBox">
           <button class="active">全部回复</button>
           <button>只看楼主</button>
           <div class="active all">
            <div class="commentUser">
                <div class="commentUserImgBox">
                    <img class="commentUserImg" src="./img/default.jpg" alt="">
                </div>
                <div class="commentUserBox">
                    <div class="commentUserName">艾滋病死亡</div>
                    <div class="commentTime">2020-10-17 20:50:17</div>
                </div>
            </div>
           </div>
           <div class="all">

           </div>
        </div>
    </div>
    
    <script src="./js/jquery.js"></script>
    <script>
        window.WebSocket=function(){}
        var postsId=location.search.split('=')[1]
        //选项卡
        var btns = document.getElementsByTagName('button')
        var all = document.getElementsByClassName('all')
        class select {
            constructor(btns, all) {
                this.index = 0;
                this.btns = btns;
                this.all = all;
                for (let i = 0; i < this.btns.length; i++) {
                    this.btns[i].onclick = () => {
                        this.click(i)
                    }
                }
            }
            click(i) {
                this.btns[this.index].classList.remove("active");
                this.all[this.index].style.display = "none";
                this.index = i;
                this.btns[i].classList.add("active");
                this.all[i].style.display = "block";
                    }
            }
        var s = new select(btns, all);
 
      
        $.ajax({
            url: 'http://localhost:3000/posts/detail',
            type: 'get',
            data:{
                postsId
            },
            success:function(data){
               console.log(data)
                $('.box').append(`
            <div class="posts">
                <p class="content">${data.content}</p>
                <div class="img-box">
            
                    
                </div>
             </div>`)
             data.image.forEach(element => {
                 $(".img-box").append(`
                    <div>
                        <img src="${element}" alt="">
                    </div>
                 `)
             });
            }
            
        })
    </script>
</body>
</html>